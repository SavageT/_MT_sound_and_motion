%Calibrate.m % % puts up a square of known gun value in the center of the screen. % All three guns have an equal gun value (no good for color calibration % Can then measure the luminance of the square for each gun value clear type = questdlg('what sort of calibration?', 'question', 'gray' , 'color', 'color'); if strcmp(type, 'color')    type = questdlg('what color?', 'question','red', 'green', 'blue', 'blue'); end% calculating the parameters of the screen % params.sz=[23.5 13.2]; %width height (inches) params.sz=[59.69 33.528];params.vdist=57; % viewer distance (cm) params.res=[2560 1440]; %pixel resolution [params.pixperdeg, params.degperpix]=VisAng(params); %see topic 10 params.pixperdeg=mean(params.pixperdeg); params.degperpix=mean(params.degperpix); params.sizesquare=8; %size of central calibration square in degrees. %create cluts if strcmp(type, 'gray')    myclut=[0:1:255; 0:1:255; 0:1:255]'; %note - unlike image, screen('SetClut') uses from 0-255 elseif strcmp(type, 'red')    myclut=[0:1:255; zeros(1, 256);zeros(1, 256)]'; elseif strcmp(type, 'green')    myclut=[zeros(1, 256); 0:1:255; zeros(1, 256)]'; elseif strcmp(type, 'blue')     myclut=[zeros(1, 256);  zeros(1, 256); 0:1:255]'; end blank=repmat(127, 256, 3); % which screen % if one screen then screenNumber is always 0 % if two screens then the window with the menu bar is refered to as 0, the other screen as 1 % note recent G3 laptops only work in non-mirrored mode. screenNumber=0; im=ones(round(params.sizesquare*params.pixperdeg), ...   round(params.sizesquare*params.pixperdeg)); window=screen(screenNumber,'OpenWindow',127, [],8);screen(window, 'PutImage',127*ones(768, 1024),  []);    screen(window, 'SetClut', blank); HideCursor; screen(window, 'SetClut', myclut); for i=255:-30:0 	i   screen(window, 'PutImage',127*ones(200),  [100 100 300 300]);    str=strcat('gun value=', num2str(i));    SCREEN(window,'DrawText',str,100,100,255);    screen(window, 'PutImage', im*i, CenterRect([0 0 size(im)], [0 0 params.res]));   % pause;  GetChar;end; clear mex;   